# Accessing Your Microservice

Once a microservice instance has been provisioned for a site, a Netlify customer can send requests to

    https://my-project.netlify.com/.netlify/<microservice-slug>/*

and Netlify will proxy these requests to the endpoint returned by your management API when the service was provisioned.

## Request Headers

All requests will include the following headers:

    X-NF-UUID: 1234-1234-1234
    X-NF-ID: 5a76f-b3902
    X-NF-SITE-URL: https://my-project.netlify.com

`X-NF-UUID`: The unique UUID generated by Netlify and sent to your management API when provisioning the instance.
`X-NF-ID`: The unique ID returned from your management API when provisioning the instance.
`X-NF-SITE-URL`: The URL of the Netlify-hosted site associated with the instance.

## Verification with JWS 

Though the headers above can be useful for quick troubleshooting and testing during development, they are vulnerable to impersonation attacks, and should not be used in production. Instead, use the JSON Web Signature (JWS) we'll include the header `X-NF-SIGN`. The JWS secret will match the bearer token generated when you first register your microservice on the platform, as described in [Getting started](getting-started.md). By verifying this secret, you'll know that the request is coming from Netlify. Also, because it's unique to your microservice, you can be sure that a leaked secret on another microservice will not impact the security of yours.

The JWS payload will be JSON with this format

    {
      "exp": epoch-seconds,
      "site_url": "https://my-project.netlify.com",
      "id": "5a76f-b3902",
      "netlify_id": "1234-1234-1234"
    }

`exp`: Standard JWS expiration field.
`site_url`: The URL of the Netlify-hosted site associated with the instance, like `X-NF-SITE-URL` above.
`id`: The unique ID returned from your management API when provisioning the instance, like `X-NF-ID` above.
`netlify_id`: The unique UUID generated by Netlify and sent to your management API when provisioning the instance, like `X-NF-SITE-URL` above.

## User-Level Authentication with JWTs

While the JWS described above may be used to verify the origin of a request, you may also want to verify certain information about the actual site user who triggered that request. Netlify handles this with JSON Web Tokens (JWTs) as a stateless identity layer.

Netlify provides a built-in Identity service (which is actually a microservice addon itself, based on our open source [GoTrue](https://www.gotrueapi.org) project). However, any authentication service that can issue JWTs will work with Netlify's microservice gateway. Site builders can include one of these JWTs as a bearer token in the Authorization header for a site route, and Netlify will verify its signature against the site's identity secret stored in Netlify's backend. If the route points to your microservice (using the path at the beginning of this doc), Netlify will re-sign the JWT with your unique secret before passing the request on to your microservice.